<div ng-init="vm.somme_stock=0">
  <div class="stock-box" ng-class="{'bg-danger':value.value>value.qtr}" ng-init="vm.somme_stock=vm.somme_stock+value.qtr*1"  ng-repeat="(key, value) in vm.selected.stock track by $index">

    <div class="pointure">{{ value.name }}</div>
    <div class="reel">
      <span class="text-center w-full" style="height: 37px; display: block;">{{ !vm.lissages?value.qtr:'0' }}</span>
    </div>
    <div class="aterme">
      <span class="text-center w-full" style="height: 37px; display: block;">{{ !vm.lissages?value.qtt:'0' }}</span>
    </div>
    <div class="nouveau">
      <input type="text"  autofocus tabindex="{{$index+1}}"  ng-keydown="$event.keyCode === 13 && vm.closeModalLissage()" value="0" min="0" ng-model="value.value" ng-change="value.value<=value.qtr?vm.calculTotal():null">
    </div>
  </div>
  <div class="text-right">
    <div class="stock-box somme">
      <div class="reel" style="width: 100%">
        <b>Stock dispo</b> {{vm.somme_stock}}
      </div>
    </div>
  </div>

  <div class="text-right m-b-xs m-r-xs">
    <div class="btn btn-success btn-xs" data-dismiss="modal" aria-hidden="true">Valider</div>
    <div class="btn btn-danger btn-xs" data-dismiss="modal" aria-hidden="true">Fermer</div>
  </div>
</div>